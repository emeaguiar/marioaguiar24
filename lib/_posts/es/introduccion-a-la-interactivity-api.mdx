---
title: Introducción a la Interactivity API de WordPress
publishedOn: '2025-12-19'
updatedOn: '2025-12-19T23:12:58.641Z'
description: >-
  Una breve introducción a la Interactivity API de WordPress, crearemos un
  bloque muy simple utilizando las nuevas herramientas disponibles.
published: true
readingTime: 240
---
La *Interactivity API*[^1] de WordPress fue lanzada en la versión 6.5[^2], y proporciona un **método para poder agregar interacciones en el Frontend de nuestros bloques**, en éste breve tutorial, crearemos un bloque muy simple utilizando estas herramientas de mostrando el proceso paso a paso.

## Pre-requisitos
* WordPress 6.5 o superior
* Soporte para Node.js y npm
## ¿QUÉ CONTRUIREMOS?

Para este bloque simplemente construiremos una pantalla de notificaciones de chat, buscará a un usuario al azar de la base de datos y nos mostrará un recuadro con una ventana de texto (también al azar).

## PASO 1: LA BASE DEL BLOQUE
Comenzaremos con la **creación básica del bloque**, no voy a profundizar mucho en este tema porque realmente no es el punto de este tutorial, pero para hacer las cosas más sencillas utilizaré la [herramienta oficial de WordPress](https://developer.wordpress.org/block-editor/reference-guides/packages/packages-create-block/) `@wordpress/create-block`:

Simplemente necesitamos ejecutar estos comandos (`slug` es el nombre del directorio donde se creará el plugin).

```bash
npx @wordpress/create-block@latest mah-interactivity-block --wp-env --template @wordpress/create-block-interactive-template
cd mah-interactivity-block
npx wp-env start
npm start
```

> [!NOTE]
> **Utilizando wp-env**
> 
> La bandera `wp-env` nos permite crear un ambiente local en el que funcionará nuestro plugin, si ya tienes un ambiente que usas para pruebas esto no es necesario.
> 
> Si no eres muy familiar con ambientes locales te invito a ver mi video
> [Creando un ambiente local para WordPress con WP-ENV](https://youtu.be/K5Uxc3H-kaU?si=H93NqzLg-DsPWJW1) en youtube donde explico
> una manera fácil de lograrlo con las herramientas que ofrece WordPress.
>
> <YouTubeEmbed videoid='K5Uxc3H-kaU' />

> [!TIP]
> La bandera `--template` nos permite definir una base a utilizar para el nuevo bloque, y utilizamos el template `@wordpress/create-block-interactive-template` para hacer las cosas más rápido.


Una vez instalado podemos buscar en el archivo `block.json` los attributos importantes, en este caso:

```json
// block.json
{
	// ...
	"supports": {
		"interactivity": true
	},
	// ...
}
```

Esto le dice a WordPress que vamos a utilizar la API en este bloque, ahora estamos listos para comenzar. Así que iniciamos el comando para poder empezar a trabajar en nuestro bloque.

```bash
npm run start
```

## PASO 2: TRABAJANDO CON **STORES**

La base de la API de Interactividad son los *stores*—básicamente es donde definimos acciones, lo que se traducirán en funciones que **serán ejecutadas cuando una interacción sucede**.

También podemos definir un *state*—que son datos que los bloques insertados en una página pueden acceder.

> [!CAUTION]
> Si estás acostumbrado a trabajar con React esto puede ser un poco confuso para ti, pero piensa que es más como un *estado global* que la forma tradicional de usar state en React.

Así que comenzamos buscando el archivo `view.js` y eliminamos el contenido de muestra, después lo reemplazamos con esto:

```js
/**
* WordPress dependencies
*/
import { store } from '@wordpress/interactivity';

const BLOCK_NAME = 'mah/interactivity-api'

const { state } = store( BLOCK_NAME, {
	// Creamos el estado inicial.
	state: {
		isOpen: false,
	},  

	actions: {
		// Acción para alternar el estado de la ventana entre abierto y cerrado.
		toggleOpen() {
			state.isOpen = ! state.isOpen;
		}
	}
} );
```

## PASO 3: CREAR EL MARKUP DE NUESTRO BLOQUE

Lo que sigue es crear las etiquetas necesarias en nuestro bloque. Como por ahora sólo debemos abrir y cerrar la ventana, esta será una tarea sencilla, simplemente creamos un contenedor con su *header* y algo de texto de muestra:

```php
<?php
// file://render.php
// Cremos un ID único para el botón.
$unique_id = wp_unique_id( 'mah-' );
?>

<div
	<?php echo get_block_wrapper_attributes(); ?>
>
	<button
		class="chat-toggle-button"
		id="button-<?php echo esc_attr( $unique_id ); ?>"
	>	
		<?php esc_html_e( 'Chat', 'mah-interactivity-block' ); ?>
	</button>

	<div class="chat-window">
		<div class="chat-content">
			<p><?php esc_html_e( '¡Bienvenido al chat!', 'mah-interactivity-block' ); ?></p>
		</div>
	</div>
</div>
```

```scss
// file://style.scss

.wp-block-create-block-mah-interactivity-block {
	display: flex;
	flex-direction: column;  

	.chat-toggle-button {
		color: white;
		background-color: blue;
		border: 2px solid darkblue;
		cursor: pointer;
		font-weight: bold;
		padding: 1rem;
		text-align: left;
	}  

	.chat-window {
		display: none;
		
		&.is-open {
			display: block;
			border: 2px solid gray;
			margin-top: 1rem;
			padding: 1rem;
		}
	}
}
```

Si agregamos nuestro bloque en un post, veremos algo como esto en el frontend:

![https://res.cloudinary.com/dyfxhbbnf/image/upload/v1766184002/Zight_2025-12-19_at_4.36.10_p.m._v5patb.png](https://res.cloudinary.com/dyfxhbbnf/image/upload/v1766184002/Zight_2025-12-19_at_4.36.10_p.m._v5patb.png)

Por ahora sólo tenemos el bloque, aún no está ligado a nuestro código, así que para ello, debemos agregar algunos atributos `data-` al nuestro HTML:

```php
<?php
// file://render.php
// Cremos un ID único para el botón.
$unique_id = wp_unique_id( 'mah-' );
?>

<div
	<?php echo get_block_wrapper_attributes(); ?>
>
	<button
		class="chat-toggle-button"
		id="button-<?php echo esc_attr( $unique_id ); ?>"
		<?php // Denifinimos la acción a ejecutar en click. ?>
		data-wp-on--click="actions.toggleOpen"
	>	
		<?php esc_html_e( 'Chat', 'mah-interactivity-block' ); ?>
	</button>

	<div
		class="chat-window"
		<?php // Especificamos que la clase `is-open` debe agregarse si state.isOpen es verdadera. ?>
		data-wp-class--is-open="state.isOpen"
	>
		<div class="chat-content">
			<p><?php esc_html_e( '¡Bienvenido al chat!', 'mah-interactivity-block' ); ?></p>
		</div>
	</div>
</div>
```

Y ahora si recarcamos nuestro bloque, podremos ver nuestra acción en funcionamiento:

![https://res.cloudinary.com/dyfxhbbnf/image/upload/v1766185805/Zight_Recording_2025-12-19_at_05.09.43_p.m._cdvaby.gif](https://res.cloudinary.com/dyfxhbbnf/image/upload/v1766185805/Zight_Recording_2025-12-19_at_05.09.43_p.m._cdvaby.gif)

[^1]: API de interactividad en español
[^2]: La versión 6.5 fue lanzada el [3 de Abril de 2024](https://wordpress.org/documentation/wordpress-version/version-6-5/)
