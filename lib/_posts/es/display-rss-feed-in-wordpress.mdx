---
title: Mostrar un feed RSS en WordPress
publishedOn: '2011-07-22T18:50:36.516Z'
updatedOn: '2024-07-21T22:44:57.022Z'
description: >-
  Mostrar un feed RSS en WordPress es bastante simple, puedes usar el widget RSS
  integrado o puedes usar un plugin. Pero ¬øqu√© pasa si quieres mostrar un feed
  RSS en una entrada o p√°gina? Eso es un poco m√°s complicado, pero a√∫n bastante
  f√°cil.
published: true
readingTime: 240
---

import Code from '@/components/code/code';

> [!WARNING]
> Este art√≠culo fue escrito en **2011** üë¥üèº. La mayor√≠a de los consejos aqu√≠ no son v√°lidos y
> no recomiendo usar ninguno de los fragmentos mostrados aqu√≠.
>
> Mantengo este art√≠culo aqu√≠ por razones hist√≥ricas y para recordarme cu√°nto he mejorado
> a lo largo de los a√±os.
>
> _Solo se hicieron cambios cosm√©ticos a este art√≠culo._

Una de las cosas que me encanta de **WordPress** es poder hacer pr√°cticamente cualquier cosa,
y sus funciones integradas hacen que esto sea a√∫n m√°s f√°cil. Hace unos d√≠as tuve la necesidad de crear
una plantilla para **obtener y mostrar publicaciones de un feed**. A pesar de ser la primera vez que
hac√≠a algo as√≠, lo hice funcionar en muy poco tiempo. Adem√°s, encontr√© un par de formas de hacer esto.

## Opci√≥n 1: WP_Http

La persona que me pidi√≥ que hiciera la plantilla me dej√≥ un enlace al blog de [Ozh](http://planetozh.com/blog/2009/08/how-to-make-http-requests-with-wordpress/),
donde explica c√≥mo usar la clase `WP_Http` para obtener contenido de sitios externos,
una forma simple y bien explicada. Una vez m√°s, hay m√°s de una forma de hacer esto.

### Usando la clase

La forma b√°sica (que Ozh explica en su art√≠culo), se hace haciendo una llamada a la clase en s√≠.

Primero incluimos la clase (desde WP 3.x)

<Code
  language='php'
  children={`if( !class_exists( 'WP_Http' ) )
        include_once( ABSPATH . WPINC. '/class-http.php' );`}
/>

Luego hacemos la llamada y probamos la conexi√≥n:

<Code
  language='php'
  children={`$request = new WP_Http;
    $result = $request->request( 'http://feed.url' );`}
/>

Si tiene √©xito, entonces `$result` ser√° un array con los siguientes datos:

- `'headers'`: Array con‚Ä¶ cabeceras‚Ä¶ como `"x-powered-by" => "PHP/5.2.1"`
- `'body'`: El contenido del feed, la cosa que necesitamos. Devuelve _HTML sin formato_
- `'response'`: Array con la respuesta del servidor, necesitamos `array('code'=>200, 'message'=>'OK')`
- `'cookies'`: Array con informaci√≥n de cookies.

Ahora a lo bueno, la implementaci√≥n:

<Code
  language='php'
  children={`function fetchFeed2($strFeedURL) { // Funci√≥n del feed
    if( !class_exists( 'WP_Http' ) ) // Clase WP_Http
        include_once( ABSPATH . WPINC. '/class-http.php' ); // Incluir clase
        
        $request = new WP_Http;
        $result = $request->request( $strFeedURL ); // probar conexi√≥n
        
        if ( ! is_wp_error($result) ) { // Sin error
            if ( ( $result['response']['code'] = 200 ) && ( $result['response']['message'] = "OK" ) ) { 
                return $result['body']; // obtener datos
            } else {
                return  $result = "";
            }
        } else { // error
            return  $result = "";
            $error_string = $result->get_error_message(); // ¬øqu√© error fue?
            echo '
' . $error_string . '; // mostrar error
        } 
    } `}
/>

Ahora solo tenemos que agregar esto donde queremos que se muestre el feed.

<Code
  language='php'
  children={`<?php
    $strFeedURL = "http://feed.url";
    echo fetchFeed2($strFeedURL);
?>
`}
/>

F√°cil ¬øverdad? [fuente](http://planetozh.com/blog/2009/08/how-to-make-http-requests-with-wordpress/)

### Usando funciones

Como mencion√© antes, hay m√°s de una forma de usar esta clase, la otra forma
es usar las funciones (en lugar de la clase en s√≠), en este caso `wp_remote_get()`.

Podr√≠amos decir que esta es la forma m√°s r√°pida de usar la clase, solo necesitamos este c√≥digo:

<Code
  language='php'
  children={`$response = wp_remote_get( 'http://feed.url' );
if( is_wp_error( $response ) ) { // error
    echo 'Algo sali√≥ mal!';
    $error_string = $response->get_error_message(); // ¬øqu√© error fue?
    echo $error_string; // mostrar error
} else { // Sin error
    echo $response['body']; // mostrar contenido
}`}
/>

El problema aqu√≠ es que (al menos en mi caso) devolvi√≥ el contenido en **XML**,
y no soy realmente bueno con eso, ¬øc√≥mo lo convierto en un simple html?

## Opci√≥n 2: Simplepie

Mi soluci√≥n final fue usar otro m√©todo, afortunadamente ya tenemos [Simplepie](http://simplepie.org/) integrado en WordPress,
ahora solo tenemos que llamar a la funci√≥n `fetch_feed()`.

<Code
  language='php'
  children={`<?php
$rss = fetch_feed('http://feed.url');
if (!is_wp_error( $rss ) ) : // ¬øSe cre√≥ el objeto?
    // ¬øCu√°ntos elementos tenemos? (M√°ximo 5)
    $maxitems = $rss->get_item_quantity(5); 
    // Crear un array con elementos comenzando con #0
    $rss_items = $rss->get_items(0, $maxitems); 
    endif;
?>`}
/>

Ahora solo tenemos que mostrar los elementos, al igual que un loop de WordPress

<Code
  language='php'
  children={`<ul>
<?php if ($maxitems == 0) echo '<li>No hay elementos.</li>';
else
// Recorrer cada elemento del feed y mostrar cada elemento como un hiperv√≠nculo.
foreach ( $rss_items as $item ) : ?>
<li>
    <a href='<?php echo esc_url( $item->get_permalink() ); ?>'
    title='<?php echo 'Publicado '.$item->get_date('j F Y | g:i a'); ?>'>
    <?php echo esc_html( $item->get_title() ); ?></a>
</li>
<?php endforeach; ?>
</ul>
`}
/>

Esta fue sin dudas la forma m√°s f√°cil y r√°pida ya que **me permite personalizar
casi en su totalidad la forma en que se muestran los elementos**, el uso es muy
similar al loop de WordPress y soporta una serie de etiquetas,
cada una listada en la [documentaci√≥n de Simplepie](http://simplepie.org/wiki/reference/simplepie_item/start).
