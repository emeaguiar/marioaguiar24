---
title: Crear un bot√≥n de modo oscuro en React con Tailwind
date: "2024-07-17"
description: En √©ste r√°pido tutorial agregaros un bot√≥n para activar modo oscuro a nuestros componentes con Tailwind.
---

import Code from '@/components/code/code';
import AlignWide from '@/components/blog/align-wide';
import {
    ComponentWithButton,
    DarkExample,
    LightExample,
    SunButtonExample,
    SunButtonDarkExample,
    Component,
} from '@/examples/toggle-dark-mode-in-nextjs/es';

# Crear un bot√≥n para cambiar el modo oscuro en React con Tailwind

Durante el redise√±o del blog me sorprendi√≥ lo f√°cil que era agregar un modo 
oscuro en _Tailwind_, as√≠ que pens√© en por qu√© no agregar un peque√±o bot√≥n que 
pudiera cambiarlo a voluntad (nada del otro mundo), y ya que iba a hacer eso, 
tambi√©n pens√© en relatar el proceso üôÇ.

En este tutorial aprenderemos a **crear un sencillo bot√≥n de y hacia modo 
oscuro dentro de nuestra aplicaci√≥n Next.js con Tailwind CSS**.

## Criterios de aceptaci√≥n

Como siempre, antes de comenzar, definamos los criterios de aceptaci√≥n para 
esta funcionalidad:

- [ ] Crear una aplicaci√≥n con modo oscuro
- [ ] Agregar un bot√≥n que cambie el modo de la aplicaci√≥n manualmente
- [ ] El modo debe cambiar autom√°ticamente si el usuario tiene configurado el 
modo oscuro en su sistema operativo

Creo que con eso es suficiente, ahora s√≠, ¬°manos a la obra!

## Pre-requsitos

Ment√≠ üôà, antes de comenzar‚Ä¶ Este tutorial asume que se poseen conocimientos de 
React intermedios (o b√°sicos si as√≠ los consideras). Adem√°s, necesitar√°s una
aplicaci√≥n en React.

Si a√∫n no la tienes, te sugiero utilizar [Vite](https://vitejs.dev/guide/). Puedes 
encontrar m√°s informaci√≥n en la [documentaci√≥n oficial](https://tailwindcss.com/docs/guides/vite).

Es bastante sencillo y el asistente te ayudar√° a trav√©z del proceso, ahora s√≠, 
¬°manos a la obra! (de verdad esta vez).

## Paso 1: Crear el modo oscuro

Antes que nada, necesitamos que nuestra aplicaci√≥n tenga un **modo oscuro** al 
que cambiar, para efectos pr√°cticos de este tutorial, crearemos un sitio muy 
b√°sico utilizando Tailwind. Por ejemplo, esta sencilla aplicaci√≥n:

<Code
    language="jsx"
    children={`<main>
    <div className="flex flex-col items-center px-4">
        <h1 className="text-4xl font-bold mt-8">¬°Hola, mundo!</h1>
        <p className="text-lg mt-4">¬°Bienvenido a mi sitio web!</p>
    </div>
</main>`}
/>

### Paso 1.1: Crear El "modo light"

La magia de Tailwind (o desgracia, dependiendo de a qui√©n le preguntes) es que 
puedes agregar todos los estilos que necesites por medio de _utility classes_,[^1] 
as√≠ que para darle forma a nuestro sitio, simplemente agregamos los colores que 
necesitamos en forma de clases `bg-` y `text-`:

<Code
    language="jsx"
    children={`<main>
    <div className="flex flex-col items-center p-4 bg-yellow-100 text-slate-900">
        <h1 className="text-4xl font-bold mt-8 text-red-700">¬°Hola, mundo!</h1>
        <p className="text-lg mt-4">¬°Bienvenido a mi sitio web!</p>
    </div>
</main>`}
/>

Lo que nos dar√≠a algo m√°s o menos as√≠:

<AlignWide>
    <LightExample />
</AlignWide>

> [!TIP]
> Puedes encontrar m√°s informaci√≥n sobre los colores de Tailwind en la [documentaci√≥n oficial](https://tailwindcss.com/docs/customizing-colors).
> O puedes extender la paleta de color con [tu propia configuraci√≥n](https://tailwindcss.com/docs/customizing-colors#extending-the-defaults).

Este tipo de patr√≥n es‚Ä¶ _pol√©mico_ en la comunidad de desarrollo web, pero por 
motivos pr√°cticos y para efectos de este tutorial, nos sirve muy bien. La ventaja 
de este enfoque es que podemos cambiar los colores de nuestra aplicaci√≥n sin tener 
que modificar el c√≥digo fuente, simplemente cambiando las clases CSS. Los que 
**nos da una mayor velocidad de desarrollo**, pero puede volverse complicado de 
mantener en aplicaciones m√°s grandes.

### Paso 1.2: Crear el "modo oscuro"

Una vez que tenemos una idea de como queremos que se vea nuestro sitio durante 
el d√≠a, podemos comenzar a jugar con el modo oscuro, para esto (y porque usamos Tailwind), 
simplemente agregamos las clases de color que necesitamos para el modo oscuro 
con el prefijo `dark:`.


<Code
    language="jsx"
    children={`<main>
    <div className="flex flex-col items-center p-4 bg-yellow-100 dark:bg-orange-950 text-slate-900 dark:text-yellow-50">
        <h1 className="text-4xl font-bold mt-8 text-red-700 dark:text-red-200">¬°Hola, mundo!</h1>
        <p className="text-lg mt-4">¬°Bienvenido a mi sitio web!</p>
    </div>
</main>`}
/>

¬øF√°cil, no? ¬°Pues eso es todo! Lo que hace Tailwind detr√°s de bambalinas es buscar
la _preferencia del usuario_, si tiene configurado el modo oscuro en su sistema operativo, 
autom√°ticamente aplicar√° las clases `dark:` a los elementos que tengan esa clase. 
As√≠, lo que normalmente har√≠amos as√≠:

<Code
    language="css"
    children={`@media (prefers-color-scheme: dark) {
    :root {
        --color--foreground: #431407; /* bg-orange-950 */
        --color--background: #fefce8; /* text-yellow-50 */
    }
}`}
/>

Ahora simplemente lo hacemos as√≠:

<Code
    language="jsx"
    children={`<div className="dark:bg-orange-950 dark:text-yellow-50">¬°Hola, mundo!</div>`}
/>

> [!NOTE]
> Adem√°s de el prefijo `dark`, Tailwind tambi√©n ofrece los prefijos `hover:`, 
`::after`, `lg:`, [entre otros](https://tailwindcss.com/docs/hover-focus-and-other-states).

Y una vez que las preferencias del usuario cambien, Tailwind se encargar√° de 
cambiar los colores autom√°ticamente:

<AlignWide>
    <DarkExample />
</AlignWide>

## Paso 2: Agregar un bot√≥n para de cambio de modo

Hasta ahora tenemos un sitio web que cambia de luz a oscuridad dependendiendo 
de las preferencias del sistema operativo del usuario, pero, **¬øQu√© pasa si el 
usuario quiere cambiarlo manualmente?** Para eso necesitamos un bot√≥n.

### Paso 2.1 Creando el bot√≥n

Como seguimos utilizando Tailwind, podemos agregar un bot√≥n r√°pidamente con 
las clases `bg-`, `text-`, `rounded`, `p-`.

<Code
    language="jsx"
    children={`<button aria-label="Cambiar a modo oscuro" className="bg-yellow-800 text-yellow-50 dark:bg-yellow-100 dark:text-slate-900 rounded-full p-2 w-min">
    <SunIcon className="w-6 h-6" />
</button>`}
/>

Y terminaremos con algo as√≠:

<AlignWide className="flex justify-center">
    <SunButtonExample />
</AlignWide>

> [!WARNING]
> Aseg√∫rate de que el bot√≥n tenga un `aria-label` para que sea accesible.

> [!CAUTION]
> ¬øRecuerdas lo que dije sobre las _utility classes_? Bueno, aqu√≠ es donde comienza 
> a ponerse complicado, si te fijas el atributo `className` del bot√≥n es un poco 
> largo, y si necesitamos cambiar el color de fondo, **tendr√≠amos que cambiarlo en 
> dos lugares**, lo que puede ser un poco tedioso. Para evitar esto, puedes crear
> tus propios componentes reutilizables.

Y con las clases que acabamos de agregar, el bot√≥n cambiar√° as√≠:

<AlignWide className="flex justify-center">
    <SunButtonDarkExample />
</AlignWide>

### Paso 2.2: Juntando los estilos

Ahora que tenemos nuestro componente y nuestro bot√≥n, **necesitamos juntarlos**, 
para esto, no explicar√© todas las clases, pero b√°sicamente necesitamos un contenedor
extra y agregar el bot√≥n a nuestro componente.

<Code
    language="jsx"
    children={`<main>
    <div className="flex flex-col items-center p-8 bg-yellow-100 text-slate-900">
        <div className="flex justify-end w-full">
            <button aria-label="Cambiar a modo oscuro" className="bg-yellow-800 text-yellow-50 dark:bg-yellow-100 dark:text-slate-900 rounded-full p-2 w-min">
                <SunIcon className="w-6 h-6" />
            </button>
        </div>

        <h1 className="text-4xl font-bold text-red-700">¬°Hola, mundo!</h1>
        <p className="text-lg mt-4">¬°Bienvenido a mi sitio web!</p>
    </div>
</main>`}
/>

Y tendremos nuestro resultado:

<AlignWide>
    <ComponentWithButton />
</AlignWide>

## Paso 3: Cambiando el modo

Hasta el momento nuestro componente cambiar√° de color autom√°ticamente dependiendo 
de las preferencias del sistema operativo del usuario, pero ahora necesitamos que 
nuestro bot√≥n **active el cambio manualmente**. En React, podemos utilizar `useState` 
para manejar el estado de nuestro componente.

<Code
    language="tsx"
    children={`import { useState } from 'react';

export function Component() {
    const [ isDarkModeActivated, setIsDarkModeActivated ] = useState( false );

    const toggleDarkMode = () => {
        setIsDarkModeActivated( !isDarkModeActivated );
    };

    return (
        <main>
            <div className="flex flex-col items-center p-4 bg-yellow-100 dark:bg-orange-950 text-slate-900 dark:text-yellow-50">
                <div className="flex justify-end w-full">
                    <button
                        aria-label="Cambiar a modo oscuro"
                        className="bg-yellow-800 text-yellow-50 dark:bg-yellow-100 dark:text-slate-900 rounded-full p-2 w-min"
                        onClick={ toggleDarkMode }
                    >
                        <SunIcon className="w-6 h-6" />
                    </button>
                </div>

                <h1 className="text-4xl font-bold mt-8 text-red-700 dark:text-red-200">¬°Hola, mundo!</h1>
                <p className="text-lg mt-4">¬°Bienvenido a mi sitio web!</p>
            </div>
        </main>
    );
}`}
/>

Con eso, al dar click a nuestro bot√≥n, el estado de `isDarkModeActivated` cambiar√° 
(ser√° revertido entre `true` y `false`).

Tailwind ofrece otra forma para poder activar el modo oscuro, para que no solo 
dependa de las preferencias del sistema operativo, si no que tambi√©n al agregar 
una clase `dark` al `html`, sin embargo esta debe ser activada en el archivo 
de configuraci√≥n de Tailwind: `tailwind.config.ts`.

<Code
    language="ts"
    children={`import type { Config } from "tailwindcss";

const config: Config = {
    darkMode: 'selector',
};

export default config;`}
/>

> [!NOTE]
> La documentaci√≥n oficial indica que la case `dark` debe ser agregada al `<html>` 
> para que funcione correctamente. Sin embargo me di cuenta de que solo necesita estar 
> en el elemento padre del componente que queremos cambiar. Normalmente queremos que 
> todo el sitio cambie, por lo que lo agregamos al `<html>`. Aqu√≠ simplemente lo 
> agregamos al contenedor principal.

Y si ahora agregamos la clase `dark` al contenedor principal, nuestro componente m√°gicamente 
cambiar√° de color:

<AlignWide className="dark">
    <ComponentWithButton />
</AlignWide>

### Paso 3.1: Enchufando el bot√≥n

Cuando damos click al bot√≥n, el estado de nuestra aplicaci√≥n cambia, pero **¬øC√≥mo
hacemos que cambie el color de nuestro componente?** Para esto, simplemente necesitamos
agregar la clase `dark` al contenedor principal si `isDarkModeActivated` es `true`.

<Code
    language="tsx"
    children={`import { useState } from 'react';

export function Component() {
    const [ isDarkModeActivated, setIsDarkModeActivated ] = useState( false );

    const toggleDarkMode = () => {
        setIsDarkModeActivated( !isDarkModeActivated );
    };

    return (
        <main className={ isDarkModeActivated ? 'dark' : '' }>
            <div className="flex flex-col items-center p-4 bg-yellow-100 dark:bg-orange-950 text-slate-900 dark:text-yellow-50">
                <div className="flex justify-end w-full">
                    <button
                        aria-label="Cambiar a modo oscuro"
                        className="bg-yellow-800 text-yellow-50 dark:bg-yellow-100 dark:text-slate-900 rounded-full p-2 w-min"
                        onClick={ toggleDarkMode }
                    >
                        <SunIcon className="w-6 h-6" />
                    </button>
                </div>

                <h1 className="text-4xl font-bold mt-8 text-red-700 dark:text-red-200">¬°Hola, mundo!</h1>
                <p className="text-lg mt-4">¬°Bienvenido a mi sitio web!</p>
            </div>
        </main>
    );
}`}
/>

Y con eso, al dar click al bot√≥n, el **color de nuestro componente cambiar√°**, ¬°Pru√©balo!

<AlignWide>
    <Component />
</AlignWide>

### Paso 3.2 Mantener preferencias del sistema operativo

Hay un peque√±o detalle que viene con esta implementaci√≥n, y es que cuando seleccionamos 
el modo oscuro `selector` como lo hicimos m√°s arriba, Tailwind no se encargar√° de
cambiar el color de nuestro componente si el usuario cambia las preferencias del sistema,
esto afortunadamente es f√°cil de solucionar, simplemente agregamos el _media query_ dentro
del mismo archivo de configuraci√≥n de Tailwind. As√≠:

<Code
    language="ts"
    children={`import type { Config } from "tailwindcss";

const config: Config = {
    darkMode: [ 'variant, [
        '&.is(.dark *)',
        'media (prefers-color-scheme: dark) {  & * }',
    ],
};

export default config;`}
/>

Y con eso, Tailwind se encargar√° de cambiar el color de nuestro componente si el usuario
cambia las preferencias de su sistema operativo.




[^1]: [Utility classes](https://tailwindcss.com/docs/utility-first)
