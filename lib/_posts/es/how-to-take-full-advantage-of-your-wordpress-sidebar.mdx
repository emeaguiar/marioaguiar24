---
title: C√≥mo Aprovechar al M√°ximo la sidebar de WordPress
publishedOn: '2010-10-23T18:50:36.516Z'
description: |-
  Las sidebars en los blogs son subestimadas, y usualmente ves la misma sidebar
    en cada p√°gina de un blog, creo que eso es solo una p√©rdida de espacio. Pero
    cuando se usan correctamente, ¬°puedes convertir tu sidebar aburrida en una
    sidebar incre√≠ble!
published: true
updatedOn: '2024-10-18T04:06:55.855Z'
readingTime: 1620
---
> [!WARNING]
> Este art√≠culo fue escrito en **2010** üë¥üèº. La mayor√≠a de los consejos aqu√≠ no son v√°lidos y
> no recomiendo usar ninguno de los fragmentos mostrados aqu√≠.
>
> Mantengo este art√≠culo aqu√≠ por razones hist√≥ricas y para recordarme cu√°nto he mejorado
> a lo largo de los a√±os.
>
> _Solo se hicieron cambios cosm√©ticos a este art√≠culo._

Voy a mostrarte algunos c√≥digos y trucos que se pueden aplicar a casi cualquier
tema que desees, esto agregar√° algunas caracter√≠sticas realmente geniales a tu barra
lateral y qui√©n sabe, tal vez incluso te consiga una cita esta noche.

La verdad, en mis primeros a√±os en **WordPress y dise√±o de temas**, nunca pens√©
que la sidebar fuera algo √∫til, de hecho, mi primer tema ni siquiera ten√≠a una,
pero tiempo despu√©s, me di cuenta de cu√°nto espacio en pantalla estaba desperdiciando,
y cambi√© de opini√≥n.
Este es un recorrido por el redise√±o de la sidebar del antiguo tema por defecto de WordPress _Kubrik_,
antes de esto; agregu√© la sidebar a las entradas individuales, por si te preguntas de d√≥nde vino.

## Creando diferentes barras laterales

Primero que nada, necesitamos dos archivos de sidebar, nombra el primero `sidebar.php`
para que funcione en las p√°ginas tambi√©n (este es el predeterminado), luego creamos uno nuevo
que se mostrar√° en nuestras entradas individuales, llam√©moslo `sidebar-single.php`

> [!NOTE]
> En `sidebar-single.php` elimin√© casi todo, excepto el cuadro de b√∫squeda y algo de texto.

## Separar la sidebar de Inicio de la de Entradas

Ahora, necesitamos que WordPress separe nuestra ‚Äúsidebar de inicio‚Äù de nuestra ‚Äúsidebar de entrada‚Äù,
esto es m√°s f√°cil si tu tema tiene un archivo `single.php` como aqu√≠, pero si no, **te recomiendo encarecidamente
que crees uno ahora, te ahorrar√° muchos problemas en el futuro.**

Para que WordPress muestre una sidebar diferente en las entradas individuales solo tienes que abrir
el archivo `single.php`, encontrar la llamada a la sidebar y decirle que **llame a la nueva sidebar
en su lugar**, algo as√≠:

Ahora en nuestro blog podemos ver esto:

**Inicio:**

**Post:**

## ¬øY si no quiero un archivo `single.php`?

Bueno, supongo que tenemos un rebelde aqu√≠. Bueno, **si realmente no quieres un archivo `single.php`
rondando en tu tema** puedes simplemente usar el archivo **index.php**, para hacer eso solo
encuentra la l√≠nea donde se llama la sidebar:

```php
<?php get_sidebar(); ?>
```

Y c√°mbiala por esto:

```php
<?php
  if( is_single() ) {
      get_sidebar( 'single' );
  } else {
      get_sidebar();
  }
```

Ese c√≥digo mostrar√° nuestra **sidebar √∫nica** SOLO si estamos en una entrada individual. Si no,
mostrar√° nuestra **sidebar predeterminada**.

OK, **now we have a sidebar just for our single posts**, how can we use it? There are
plenty of ways! For example, do you show **related posts or social icons** below your
posts? Maybe some of this stuff can look better on our new sidebar, let's try it.

## Agregando entradas relacionadas

Empecemos por agregar algunas entradas relacionadas a nuestra entrada, para hacer eso estoy usando
el [plug-in YARPP](http://mitcho.com/code/yarpp/) (¬°una versi√≥n antigua, no me juzgues!), en tu
`sidebar-single.php` agrega la funci√≥n `related_posts()` (o cualquier funci√≥n que use tu plug-in) y
ahora en tu blog deber√≠as ver algo as√≠:

Hay otra forma de mostrar entradas relacionadas sin necesidad de un plug-in, pero
**simplemente no puedo hacer que funcione en la sidebar**, a√∫n as√≠, no veo ning√∫n problema en usar
un plug-in para esto (ya que es el √∫nico plug-in que estoy usando en este tutorial).

## Agregando botones de redes sociales

¬°Se ve bien! Ahora agreguemos algunos **botones de redes sociales como Twitter o Facebook**, estoy usando
[este set de iconos sociales](http://tydlinka.deviantart.com/art/Set-of-social-icons-109435724).

Aqu√≠ en el tema predeterminado no tengo mucho espacio, as√≠ que solo agregar√© botones de twitter
y facebook, pero si quieres agregar m√°s, es pr√°cticamente lo mismo.

Agregar un bot√≥n de Facebook es f√°cil porque solo necesitas **compartir la URL**, solo
tienes que pegar el siguiente c√≥digo en la sidebar.

```php
<a href="http://www.facebook.com/sharer.php?u=<?php the_permalink(); ?>" target="_blank"><img src="<?php bloginfo('template_directory'); ?>/images/facebook.png" alt="Compartir en Facebook" /></a>
```

**Twitter**, por otro lado, es un poco complicado porque quieres que tus seguidores
sepan qu√© est√°s compartiendo, por lo tanto, debes agregar el t√≠tulo, luego, cuando solo tienes
140 caracteres para usar, no puedes enviar la URL completa junto con el t√≠tulo, por lo tanto,
necesitas una **URL corta**.

Hay muchos servicios para acortar una URL, e incluso puedes crear la tuya,
pero por ahora puedes usar servicios como [tinyurl](http://tinyurl.com/) o [bit.ly](http://bit.ly/) si quieres.

### Agregando "+" al t√≠tulo

He encontrado que a veces en Twitter, si no agregas un signo m√°s ‚Äú+‚Äù al t√≠tulo
cuando env√≠as un tweet desde un enlace, **muestra un horrible ‚Äú%20‚Äù en cada espacio**, afortunadamente,
hay una forma sencilla de solucionar esto.

Esto va en tu archivo **functions.php** (¬øya notaste la importancia de este archivo?)

```php
<?php
    function twitle( $title ) { 
        $newtitle = str_replace( " ", "+", $title );
        echo $newtitle;
    }
?>
```

En realidad no necesitas crear una funci√≥n solo para eso, pero creo que podr√≠a ser √∫til m√°s adelante.

### Usando Tinyurl

Si quieres usar tinyurl, aqu√≠ est√° el c√≥digo que necesitas, p√©galo en tu archivo `functions.php`:

```php
function tinyurl( $url ) {
    $tinyurl = file_get_contents( "http://tinyurl.com/api-create.php?url=" . $url );
    return $tinyurl;
}
```

Ahora, pega el siguiente c√≥digo en tu sidebar:

```php
<a href="http://twitter.com/home?status=<?php twitle( the_title() ); ?>+<?php echo tinyurl( get_permalink() ); ?>" target="_blank"><img src="<?php bloginfo('template_directory'); ?>/images/twitter.png" alt="Compartir en Twitter" /></a>
```

> [!NOTE]
> No lo he probado, pero seg√∫n [WPRecipes2](http://www.wprecipes.com/how-to-automatically-provide-tinyurls-for-your-wordpress-blog-posts)
> funciona (solo hice algunos cambios).

### Usando bit.ly

Prefiero [bit.ly](http://bit.ly/) porque te permite **mantener un registro de tus URLs acortadas**,
y es m√°s corto que tinyurl.

Primero necesitas [registrarte en bit.ly](http://bit.ly/account/register?rd=/),
y luego tendr√°s acceso a una [clave de API](http://bit.ly/account/your_api_key/),
nuevamente, pega este c√≥digo en tu archivo `functions.php`:

```php
//create bit.ly url
function bitly() {
    // login information
    $url = get_permalink(); //generates wordpress' permalink
    $login = '';//your bit.ly login
    $apikey = ''; //your bit.ly apikey
    $format = 'json';//choose between json or xml
    $version = '2.0.1';
    //create the URL
    $bitly = 'http://api.bit.ly/shorten?version='.$version.'&longUrl='.urlencode($url).'&login='.$login.'&apiKey='.$apikey.'&format='.$format;
    //get the url
    //could also use cURL here
    $response = file_get_contents($bitly);
    //parse depending on desired format
    if(strtolower($format) == 'json')
    {
        $json = @json_decode($response,true);
        echo $json['results'][$url]['shortUrl'];
    }
    else //xml
    {
        $xml = simplexml_load_string($response);
        echo 'http://bit.ly/'.$xml->results->nodeKeyVal->hash;
    }
}
```

No olvides llenar con tu nombre de usuario y clave de API, despu√©s de eso pega esto en tu sidebar:

```php
<?php $bitlyurl = bitly(); ?>
<a href="http://www.twitter.com/home?status=<?php twitle(the_title('','',false)); ?>+<?php echo $bitlyurl; ?>" target="_blank"><img src="<?php bloginfo('template_url'); ?>/images/twitter.png" alt="Tweet me!" /></a>
```

> [!WARNING]
> Tampoco lo he probado, fuente: [DevMoose](http://devmoose.com/coding/automatically-create-a-bitly-url-for-wordpress-posts/)

### Usando tu propio dominio.

Creo que usar tu propio dominio es la mejor forma de crear una URL corta, te da presencia,
personalidad y tus potenciales lectores saben que van a un sitio web serio (s√≠, es cierto).
A√∫n as√≠, si tienes un dominio largo (como thisisthebestblogeveraccordingtomymomlol.com)
tal vez deber√≠as usar bit.ly o tinyurl.

La forma m√°s f√°cil de crear una URL corta en WordPress es usar ‚Äúel ID del post‚Äù,
solo pega esto en tu sidebar:

```php
<a href="http://www.twitter.com/home?status=<?php twitle(the_title('','',false)); ?>+<?php bloginfo('url') ?>/?p=<?php echo $post->ID; ?>" rel="nofollow" target="_blank"><img src="<?php bloginfo('template_url'); ?>/images/twitter.png" alt="Twiteame!"/></a>
```

Eso enviar√° algo como esto: **Hola Mundo http://dominio.com/?p=123**, es corto, pero puede ser a√∫n m√°s corto.
Adem√°s, puedes cambiar `<?php get_bloginfo('url') ?>` (que env√≠a la URL de tu blog) por otro dominio si quieres,
por ejemplo, un dominio hack como aweso.me o bite.me (ya sabes, algo genial), solo recuerda que **tienes que
ser due√±o de ese dominio** (ni siquiera pienses en youtu.be).

### Usando tu propio dominio v2.0

Usando el c√≥digo anterior, y agregando algunas redirecciones 301 a nuestro archivo `.htaccess` podemos
desprendernos del `?p=` ganando tres valiosos caracteres.

En el c√≥digo anterior, elimina `?p=` para que quede as√≠:

```php
<a href="http://www.twitter.com/home?status=<?php twitle(the_title('','',false)); ?>+<?php bloginfo('url') ?>/<?php echo $post->ID; ?>" rel="nofollow" target="_blank"><img src="<?php bloginfo('template_url'); ?>/images/twitter.png" alt="Twiteame!"/></a>
```

Eso env√≠a algo como esto: **Hola Mundo http://dominio.com/123**, pero tambi√©n viene con un bonito error 404.
Para arreglar eso tenemos que agregar esta regla a nuestro archivo `.htaccess`:

```plain
#shorturl
RewriteRule ^([0-9]+)$ ?p=$1 [R=301,L]
#shorturl
```

¬°Listo! Ahora **nuestro propio URL corto est√° funcionando**, y ahora nuestra sidebar se ve algo
as√≠ (¬°con botones funcionando!):

## Agregando una URL ‚Äú¬°Comp√°rtelo!‚Äù

Tambi√©n puedes querer agregar una URL corta para que **tus lectores puedan compartir la entrada por s√≠ mismos**,
si es as√≠, solo agrega el siguiente c√≥digo dependiendo del m√©todo de acortamiento que elegiste antes:

### Tinyurl

```php
<form>
<input id="shorturl" name="q" size="30" readonly="readonly" onClick="javascript:this.form.shorturl.focus();this.form.shorturl.select();" value="<?php echo $turl; ?>" type="text">
</form>
```

### Bit.ly

```php
<form>
<input id="shorturl" name="q" size="30" readonly="readonly" onClick="javascript:this.form.shorturl.focus();this.form.shorturl.select();" value="<?php echo $bitlyurl; ?>" type="text">
</form>
```

### Tu propio dominio v1.0

```php
<form>
<input id="shorturl" name="q" size="30" readonly="readonly" onClick="javascript:this.form.shorturl.focus();this.form.shorturl.select();" value="<?php bloginfo('url'); ?>/?p=<?php echo $post->ID; ?>" type="text">
</form>
```

### Tu propio dominio v2.0

```php
<form>
<input id="shorturl" name="q" size="30" readonly="readonly" onClick="javascript:this.form.shorturl.focus();this.form.shorturl.select();" value="<?php bloginfo('url'); ?>/<?php echo $post->ID; ?>" type="text">
</form>
```

Eso mostrar√° algo como esto:

> [!CAUTION] > **Tienes** que usar el mismo m√©todo de acortamiento que usaste antes si quieres que esto funcione.

## Agregando m√°s entradas en la misma categor√≠a

Ahora, **agreguemos m√°s entradas en la misma categor√≠a que la que estamos leyendo**
(queremos que el lector se quede en nuestro blog por un tiempo, ¬øno?)

Tom√© esta funci√≥n (bueno, no era una funci√≥n cuando la tom√©) del [tema Agregado](http://www.darrenhoyt.com/2008/09/08/agregado-lifestream-theme-for-wordpress-released/)
(que por cierto, realmente sabe c√≥mo aprovechar la sidebar), agrega el primer c√≥digo en tu archivo `functions.php`,
y el segundo en tu archivo `sidebar-single.php`.

```php
<?php
function get_more_category() {
global $post;$categories = get_the_category();foreach ($categories as $category) :$posts = get_posts('numberposts=3&exclude='.$post->ID.'&category='. $category->term_id);if(count($posts) > 1) {?><h2>Mas <em>en</em> '<?php echo $category->name; ?>':</h2><p><ul><?php foreach($posts as $post) : ?><li><a href="<?php the_permalink(); ?>"<?php the_title(); ?></a></li><?php endforeach; ?></ul></p><?php } endforeach;}<?php get_more_category(); ?>
```

## Mostrando informaci√≥n del autor

Si tienes un blog con m√°s de un autor, es posible que desees agregar una peque√±a biograf√≠a a
cada entrada, ¬øverdad? Todos los dem√°s blogs lo hacen mostrando la informaci√≥n debajo de la entrada,
pero como nos gusta ser diferentes, y estamos **mejorando nuestra sidebar**, ¬øqu√© tal si ponemos
la biograf√≠a all√≠? Aseg√∫rate de completar completamente tu p√°gina de perfil en el WP admin,
eso es lo que vamos a usar.

Una vez que hayas hecho eso, pega esto en tu sidebar:

```php
<?php the_author_link(); ?> is a <?php the_author_meta('description'); ?>
```

Suponiendo que ya he puesto mi informaci√≥n en mi p√°gina de perfil, esto mostrar√≠a algo como esto:

> Mario es un dise√±ador genial que ama hacer temas, escribir blogs y comer beb√©s, en ese orden.

> [!NOTE]
> Si quieres agregar gravatar, usa esto:

```php
<?php echo get_avatar( get_the_author_meta('user_email'), '80', '' ); ?>
```

Donde "80" es el tama√±o (en p√≠xeles) de la imagen, tambi√©n puedes cambiar eso. [Fuente](http://line25.com/tutorials/how-to-create-an-author-info-section-in-wordpress).

> [!NOTE]
> A partir de aqu√≠, los pr√≥ximos trucos se adaptar√°n mejor a nuestra sidebar de inicio (el archivo `sidebar.php`).

## Mostrando las entradas m√°s populares

En caso de que quieras agregar una lista con las **entradas m√°s populares de tu blog** (bueno, en realidad las m√°s comentadas),
est√°s en el lugar correcto.

Esto va en tu archivo `functions.php`:

```php
function most_popular_posts($no_posts = 10, $before = '<li>', $after = '</li>', $show_pass_post = false, $duration='') {
global $wpdb;
$request = "SELECT ID, post_title, COUNT($wpdb->comments.comment_post_ID) AS 'comment_count' FROM $wpdb->posts, $wpdb->comments";
$request .= " WHERE comment_approved = '1' AND $wpdb->posts.ID=$wpdb->comments.comment_post_ID AND post_status = 'publish'";
if(!$show_pass_post) $request .= " AND post_password =''";
if($duration !="") {
$request .= " AND DATE_SUB(CURDATE(),INTERVAL ".$duration." DAY) < post_date ";
}
$request .= " GROUP BY $wpdb->comments.comment_post_ID ORDER BY comment_count DESC LIMIT $no_posts";
$posts = $wpdb->get_results($request);
$output = '';
if ($posts) {
foreach ($posts as $post) {
$post_title = stripslashes($post->post_title);
$comment_count = $post->comment_count;
$permalink = get_permalink($post->ID);
$output .= $before . '<a href="' . $permalink . '" title="' . $post_title.'">' . $post_title . '</a> (' . $comment_count.')' . $after;
}
} else {
$output .= $before . "None found" . $after;
}
echo $output;
}
```

Y esto va en tu sidebar:

```php
<h2>Popular</h2>
<ul><?php most_popular_posts(); ?></ul>
```

## Mostrando entradas recientes

Muchos blogs (casi todos) muestran algunas **entradas recientes** en su p√°gina de inicio, y hay
muchos plug-ins para eso, pero dije que no usar√≠a m√°s plug-ins, y no puedo retractarme, ¬øverdad?

Tom√© este c√≥digo del conocido [plug-in de entradas recientes](http://wordpress.org/extend/plugins/recent-posts/),
es solo una funci√≥n, por lo que se puede colocar f√°cilmente en nuestro archivo `functions.php`.

```php
<?php function mdv_recent_posts($no_posts = 5, $before = '<li>', $after = '</li>', $hide_pass_post = true, $skip_posts = 0, $show_excerpts = false, $include_pages = false) {
global $wpdb;
$time_difference = get_settings('gmt_offset');
$now = gmdate("Y-m-d H:i:s",time());
$request = "SELECT ID, post_title, post_excerpt FROM $wpdb->posts WHERE post_status = 'publish' ";
if($hide_pass_post) $request .= "AND post_password ='' ";
if($include_pages) $request .= "AND (post_type='post' OR post_type='page') ";
else $request .= "AND post_type='post' ";
$request .= "AND post_date_gmt < '$now' ORDER BY post_date DESC LIMIT $skip_posts, $no_posts";
$posts = $wpdb->get_results($request);
$output = '';
if($posts) {
foreach ($posts as $post) {
$post_title = stripslashes($post->post_title);
$permalink = get_permalink($post->ID);
$output .= $before . '<a href="' . $permalink . '" rel="bookmark" title="Permanent Link: ' . htmlspecialchars($post_title, ENT_COMPAT) . '">' . htmlspecialchars($post_title) . '</a>';
if($show_excerpts) {
$post_excerpt = stripslashes($post->post_excerpt);
$output.= '<br />' . $post_excerpt;
}
$output .= $after;
}
} else {
$output .= $before . "Can't find any :S" . $after;
}
echo $output;
}
?>
```

Pega esto en tu sidebar:

```php
<?php mdv_recent_posts(); ?>
```

## Mostrando comentarios recientes

**Los blogs son sobre la comunidad**, as√≠ que queremos que nuestros lectores hagan muchos comentarios,
pero son t√≠midos, necesitan saber que alg√∫n otro tipo genial lo hizo antes. Para que esto suceda,
necesitamos mostrar una lista con los comentarios m√°s recientes en nuestro blog.

Pega el siguiente c√≥digo en tu archivo `functions.php` (lo siento, pero realmente no puedo recordar
de d√≥nde saqu√© esto, estaba en mi archivo `functions.php`):

```php
<?php
function recent_comments($comm = 5) {
global $wpdb;
$sql = "SELECT DISTINCT ID, post_title, post_password, comment_ID, comment_post_ID, comment_author, comment_date_gmt, comment_approved, comment_type,comment_author_url, SUBSTRING(comment_content,1,30) AS com_excerpt FROM $wpdb->comments LEFT OUTER JOIN $wpdb->posts ON ($wpdb->comments.comment_post_ID = $wpdb->posts.ID) WHERE comment_approved = '1' AND comment_type = '' AND post_password = '' ORDER BY comment_date_gmt DESC LIMIT $comm"; 
$comments = $wpdb->get_results($sql);
$output = $pre_HTML;
$output .= "n<ul class="recentcomments">";
foreach ($comments as $comment) {
$output .= "n<li><strong>".strip_tags($comment->comment_author) ."</strong> <em>en</em> " . "<a href="" . get_permalink($comment->ID)."#comment-" . $comment->comment_ID . "" title="". strip_tags($comment->com_excerpt). "">".$comment->post_title ."</a></li>";
}
$output .= "n</ul>";
$output .= $post_HTML;
echo $output;
}
```

Ahora llamamos a la funci√≥n en nuestra sidebar:

```php
<?php recent_comments(); ?>
```

## Mostrando entradas aleatorias

En este punto, **tenemos muchas entradas mostr√°ndose en nuestra sidebar**, pero eso es algo bueno, ¬øverdad?
¬°Entradas! ¬°Entradas por todas partes!

Ok, solo agrega el siguiente c√≥digo a tu sidebar:

```php
<li><h2>Entradas aleatorias</h2></li>
<li><ul>
<?php
$rand_posts = get_posts('numberposts=5&orderby=rand');
foreach( $rand_posts as $post ) :
?>
<li><a href="<?php the_permalink(); ?>">
 <?php the_title(); ?>
</a></li>
<?php endforeach;
?>
</ul></li>
```

[Source](http://www.honeytechblog.com/how-to-show-random-posts-without-using-any-wordpress-plugins/)

## Mostrando un blogroll

OK, tal vez esto no sea el mejor truco de WordPress, pero es bastante √∫til cuando
tienes varios sitios web, o puedes mostrar todos tus perfiles en twitter,
facebook, linkedin, etc. Solo agrega esos enlaces en tu administrador de enlaces de WordPress,
y mu√©stralos con este c√≥digo:

```php
<?php wp_list_bookmarks('title_li=&category_before=&category_after='); ?>
```

## El resultado

Creo que ahora tenemos una **sidebar bastante √∫til para nuestro blog**, pero si quieres,
puedes seguir agregando funciones como quieras, ¬°no hay l√≠mites!

As√≠ es como se ve mi sidebar despu√©s de algunas correcciones:

## ¬°S√© creativo!

Recuerda, esto es solo un ejemplo, tu sidebar no tiene que verse exactamente como
la m√≠a, pero espero que estos consejos/trucos te ayuden a aprovechar al m√°ximo tu sidebar,
adem√°s, **¬°s√© creativo!** Piensa en diferentes formas de usar esa sidebar, una vez vi un blog
que ten√≠a los comentarios en la sidebar. Ponte en el lugar de tus lectores,
**¬øc√≥mo se puede mejorar su experiencia?**
